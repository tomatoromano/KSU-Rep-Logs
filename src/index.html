<!DOCTYPE html>
<html>
<head>
    <title>RepLogs</title>
    <link rel="stylesheet" href="stylings.css">
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1419.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/amazon-cognito-identity-js/6.1.0/amazon-cognito-identity.min.js"></script>
    <script>
        // AWS Cognito setup
        const CognitoUserPool = AmazonCognitoIdentity.CognitoUserPool;
        const poolData = {
            UserPoolId: 'us-east-1_xxxxxxxx',       // Replace with your User Pool ID<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< Delete comment after
            ClientId:  'xxxxxxxxxxxxxxx'             // Replace with your App Client ID<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< Delete comment after
        };
        const userPool = new CognitoUserPool(poolData);

        function signIn(username, password) {
            const authenticationData = {
                Username: username,
                Password: password
            };
            const authenticationDetails = new AmazonCognitoIdentity.AuthenticationDetails(authenticationData);
            const userData = {
                Username: username,
                Pool: userPool
            };
            const cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);
            cognitoUser.authenticateUser(authenticationDetails, {
                onSuccess: (result) => {
                    console.log('Access token: ' + result.getAccessToken().getJwtToken());
                    window.location.href = "mainpage.html";
                },
                onFailure: (err) => {
                    alert(err.message || JSON.stringify(err));
                }
            });
        }

        function validateForm() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            signIn(username, password); // Replaced navigation logic with AWS Cognito authentication
            return false;               // Prevents default form submission
        }
    </script>
</head>
<body>
    <!--Rep Logs logo-->
    <div class="title">
        <img src="images/REP lOgs.png" alt="website header">
    </div>

    <div class="text">
        Please enter an 8-character username and password to sign in
    </div>

    <form id="signIn" onsubmit="return validateForm()">
        <input type="text" id="username" placeholder="Please enter username" maxlength="8" required>
        <input type="text" id="password" placeholder="Please enter password" maxlength="8" required>
        <button type="submit">Submit</button>
    </form>
</body>
</html>